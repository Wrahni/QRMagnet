<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WiFi QR Code Magnet Generator</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Montserrat:wght@400;500;600&family=Roboto:wght@400;500&family=Inconsolata:wght@400;500&display=swap"
    rel="stylesheet"
  />
  <!-- QR Code Generator Library -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
  <style>
    /* Minimal CSS so you can test without external file */
    body { font-family: sans-serif; padding: 1em; }
    .preview-panel { margin-top: 1em; }
    svg { width: 200px; height: 200px; border: 1px solid #ddd; }
  </style>
</head>
<body>
  <h1>WiFi QR Code Magnet Generator</h1>

  <label>SSID* <input id="ssid" value="SmithWiFi"></label><br>
  <label>Password* <input id="password" value="12345678"></label><br>
  <label>Security
    <select id="security">
      <option value="WPA">WPA/WPA2</option>
      <option value="WEP">WEP</option>
      <option value="nopass">Open</option>
    </select>
  </label><br>

  <button id="update">Generate Preview</button>

  <div class="preview-panel">
    <h2>Preview</h2>
    <svg id="magnet-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
      <rect width="200" height="200" fill="white" stroke="#ddd"/>
      <g id="qr-container" transform="translate(30,30)"></g>
      <text id="wifi-label" x="100" y="190" text-anchor="middle" font-family="Inconsolata, monospace" font-size="10"></text>
    </svg>
  </div>

  <script>
    // Single inline script so no old code remains
    document.getElementById('update').addEventListener('click', () => {
      const ssid = document.getElementById('ssid').value;
      const pwd = document.getElementById('password').value;
      const sec = document.getElementById('security').value;
      const data = `WIFI:T:${sec};S:${ssid};P:${pwd};;`;

      // Generate QR using qrcode-generator
      const qr = qrcode(0, 'H');
      qr.addData(data);
      qr.make();
      const svgTag = qr.createSvgTag({cellSize:4, margin:0});

      // Insert QR
      const container = document.getElementById('qr-container');
      container.innerHTML = svgTag;

      // Show SSID below
      document.getElementById('wifi-label').textContent = `${ssid} / ${pwd}`;
    });

    // Auto-generate on load
    window.onload = () => document.getElementById('update').click();
  </script>
</body>
</html>
